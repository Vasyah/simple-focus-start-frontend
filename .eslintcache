[{"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\index.js":"1","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\App.js":"2","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\contexts\\AuthContext.js":"3","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\NewsPage\\NewsPage.js":"4","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\SignupPage\\SignupPage.js":"5","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\LoginPage\\LoginPage.js":"6","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\UpdateProfile\\UpdateProfilePage.js":"7","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\ForgotPasswordPage\\ForgotPasswordPage.js":"8","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\VideoChatPage\\VideoChatPage.js":"9","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Header\\Header.js":"10","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\PrivateRoute\\PrivateRoute.js":"11","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\firebase.js":"12","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Alert\\Alert.js":"13","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useValidatePassword.js":"14","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useLogin.js":"15","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useValidateEmail.js":"16","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useSignup.js":"17","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useUpdateProfile.js":"18","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useForgotPassword.js":"19","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Users\\Users.js":"20","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Loading\\Loading.js":"21","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Delayed\\Delayed.js":"22","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useNoUser.js":"23"},{"size":220,"mtime":1609759085619,"results":"24","hashOfConfig":"25"},{"size":1503,"mtime":1611144216052,"results":"26","hashOfConfig":"25"},{"size":6482,"mtime":1611241636954,"results":"27","hashOfConfig":"25"},{"size":275,"mtime":1610299701467,"results":"28","hashOfConfig":"25"},{"size":4235,"mtime":1610814345018,"results":"29","hashOfConfig":"25"},{"size":3192,"mtime":1611051726250,"results":"30","hashOfConfig":"25"},{"size":3896,"mtime":1611239770809,"results":"31","hashOfConfig":"25"},{"size":2719,"mtime":1610046500787,"results":"32","hashOfConfig":"25"},{"size":4813,"mtime":1610898108510,"results":"33","hashOfConfig":"25"},{"size":3107,"mtime":1611241408931,"results":"34","hashOfConfig":"25"},{"size":959,"mtime":1611241421866,"results":"35","hashOfConfig":"25"},{"size":576,"mtime":1610813206689,"results":"36","hashOfConfig":"25"},{"size":388,"mtime":1609957114998,"results":"37","hashOfConfig":"25"},{"size":992,"mtime":1610045519359,"results":"38","hashOfConfig":"25"},{"size":902,"mtime":1611241623709,"results":"39","hashOfConfig":"25"},{"size":794,"mtime":1610045509732,"results":"40","hashOfConfig":"25"},{"size":930,"mtime":1611241540320,"results":"41","hashOfConfig":"25"},{"size":1255,"mtime":1610045493394,"results":"42","hashOfConfig":"25"},{"size":1134,"mtime":1610897175500,"results":"43","hashOfConfig":"25"},{"size":346,"mtime":1611239770644,"results":"44","hashOfConfig":"25"},{"size":325,"mtime":1611142621403,"results":"45","hashOfConfig":"25"},{"size":343,"mtime":1611135810167,"results":"46","hashOfConfig":"25"},{"size":550,"mtime":1611047095621,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"146o5a3",{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"67","usedDeprecatedRules":"50"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"50"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"95","messages":"96","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"98"},"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\index.js",[],["99","100"],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\App.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\contexts\\AuthContext.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\NewsPage\\NewsPage.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\SignupPage\\SignupPage.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\LoginPage\\LoginPage.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\UpdateProfile\\UpdateProfilePage.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\ForgotPasswordPage\\ForgotPasswordPage.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\VideoChatPage\\VideoChatPage.js",["101","102","103"],"import React, { useEffect, useState, useRef } from 'react';\r\nimport io from \"socket.io-client\";\r\nimport Peer from \"simple-peer\";\r\nimport './video-chat-page.scss';\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nconst VideoChatPage = () => {\r\n  // ref\r\n  const userVideo = useRef();\r\n  const partnerVideo = useRef();\r\n  const socket = useRef();\r\n  // state\r\n  const [ yourID, setYourID ] = useState(\"\");\r\n  const [ users, setUsers ] = useState({});\r\n  const [ stream, setStream ] = useState();\r\n  const [ receivingCall, setReceivingCall ] = useState(false);\r\n  const [ caller, setCaller ] = useState(\"\");\r\n  const [ callerSignal, setCallerSignal ] = useState();\r\n  const [ callAccepted, setCallAccepted ] = useState(false);\r\n  // other\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    startVideo();\r\n  }, []);\r\n\r\n  const stopVideo = () => {\r\n    if (userVideo.current) {\r\n      let tracks = userVideo.current.srcObject.getTracks();\r\n      tracks.forEach(function (track) {\r\n        track.stop();\r\n      });\r\n      userVideo.current.srcObject = null;\r\n    }\r\n  }\r\n\r\n  const stopCall = () => {\r\n    if (userVideo.current && partnerVideo.current) {\r\n      let videos = [];\r\n      videos.push(partnerVideo.current.srcObject.getTracks(), userVideo.current.srcObject.getTracks());\r\n      videos.forEach(tracks => {\r\n        tracks.forEach(function (track) {\r\n          track.stop();\r\n        });\r\n      })\r\n      userVideo.current.srcObject = null;\r\n      partnerVideo.current.srcObject = null;\r\n    }\r\n  }\r\n\r\n  const startVideo = () => {\r\n    if (currentUser.id) {\r\n      socket.current = io.connect(\"/\");\r\n      console.log(1)\r\n      navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {\r\n        setStream(stream);\r\n        if (userVideo.current) {\r\n          userVideo.current.srcObject = stream;\r\n        }\r\n      })\r\n\r\n      // socket.current.on(\"yourID\", (id) => {\r\n      //   setYourID(id);\r\n      // })\r\n      // socket.current.on(\"allUsers\", (users) => {\r\n      //   setUsers(users);\r\n      // })\r\n\r\n      socket.current.emit(\"yourID\", currentUser.id);\r\n      socket.current.emit(\"allUsers\", currentUser.id);\r\n\r\n      socket.current.on(\"hey\", (data) => {\r\n        setReceivingCall(true);\r\n        setCaller(data.from);\r\n        setCallerSignal(data.signal);\r\n      })\r\n    }\r\n  }\r\n\r\n  const callPeer = id => {\r\n    const peer = new Peer({\r\n      initiator: true,\r\n      trickle: false,\r\n      stream: stream,\r\n    });\r\n\r\n    peer.on('signal', data => {\r\n      socket.emit('callUser', {\r\n        userToCall: id,\r\n        signalData: data,\r\n        from: currentUser.id,\r\n      })\r\n    })\r\n\r\n    peer.on(\"stream\", stream => {\r\n      if (partnerVideo.current) {\r\n        partnerVideo.current.srcObject = stream;\r\n      }\r\n    });\r\n\r\n    socket.current.on(\"callAccepted\", signal => {\r\n      setCallAccepted(true);\r\n      peer.signal(signal);\r\n    })\r\n\r\n  }\r\n\r\n  const acceptCall = () => {\r\n    setCallAccepted(true);\r\n    const peer = new Peer({\r\n      initiator: false,\r\n      trickle: false,\r\n      stream: stream,\r\n    });\r\n\r\n    peer.on('signal', data => {\r\n      socket.current.emit('acceptCall', {\r\n        signal: data,\r\n        to: caller\r\n      })\r\n    })\r\n\r\n    peer.on(\"stream\", stream => {\r\n      partnerVideo.current.srcObject = stream;\r\n    });\r\n\r\n    peer.signal(callerSignal);\r\n  }\r\n\r\n  const log = () => {\r\n    console.log('partnerVideo', partnerVideo);\r\n    console.log('currentUser', currentUser);\r\n  }\r\n\r\n  let UserVideo;\r\n  if (stream) {\r\n    UserVideo = (\r\n      <video playsInline muted ref={userVideo} autoPlay/>\r\n    );\r\n  }\r\n\r\n  let PartnerVideo;\r\n  if (callAccepted) {\r\n    PartnerVideo = (\r\n      <video playsInline ref={partnerVideo} autoPlay/>\r\n    );\r\n  }\r\n\r\n  let incomingCall;\r\n  if (receivingCall) {\r\n    incomingCall = (\r\n      <div>\r\n        <h1>{caller} is calling you</h1>\r\n        <button onClick={acceptCall}>Accept</button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={'videochat-wrapper container'}>\r\n      <div className={'videochat'}>\r\n        <div>\r\n          {UserVideo}\r\n          {PartnerVideo}\r\n        </div>\r\n        <div>\r\n          {Object.keys(users).map(key => {\r\n            if (key === yourID) {\r\n              console.log(key)\r\n              return null;\r\n            }\r\n            return (\r\n              <button key={yourID} onClick={() => callPeer(key)}>Call {key}</button>\r\n            );\r\n          })}\r\n          <button onClick={stopVideo}>stop video</button>\r\n          <button onClick={startVideo}>start video</button>\r\n          <button onClick={stopCall}>stop call</button>\r\n          <button onClick={log}>log something</button>\r\n        </div>\r\n        <div>\r\n          {incomingCall}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VideoChatPage;\r\n","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Header\\Header.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\PrivateRoute\\PrivateRoute.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\firebase.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Alert\\Alert.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useValidatePassword.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useLogin.js",["104"],"import { useState, useEffect } from 'react';\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\n\r\nconst useLogin = (values, noErrors) => {\r\n  // state\r\n  const [ loginErrors, setLoginErrors ] = useState([]);\r\n  const [ loading, setLoading ] = useState(false);\r\n  // other\r\n  const { login } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (!noErrors) return;\r\n    setSignup().catch(error => console.log(error));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [ noErrors, values ]);\r\n\r\n  const setSignup = async () => {\r\n    setLoginErrors([]);\r\n    try {\r\n      setLoading(true);\r\n      await login(values.email, values.password)\r\n      setLoading(false);\r\n    } catch {\r\n      setLoading(true);\r\n      setLoginErrors([ 'Не удалось войти в аккаунт!' ]);\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return { loginErrors, loading };\r\n}\r\n\r\nexport default useLogin;\r\n","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useValidateEmail.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useSignup.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useUpdateProfile.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useForgotPassword.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Users\\Users.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Loading\\Loading.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Delayed\\Delayed.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useNoUser.js",["105"],"import { useState, useEffect } from 'react';\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\n\r\nconst useNoUser = () => {\r\n  const [ noUser, setNoUser ] = useState(true);\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    fetchUser().then(() => {\r\n      console.log(currentUser)\r\n    });\r\n  }, [ currentUser ]);\r\n\r\n  const fetchUser = async () => {\r\n    try {\r\n      !currentUser ? setNoUser(true) : setNoUser(false);\r\n    } catch {\r\n      console.log('error');\r\n    }\r\n  }\r\n\r\n  return { noUser };\r\n}\r\n\r\nexport default useNoUser;\r\n",["106","107"],{"ruleId":"108","replacedBy":"109"},{"ruleId":"110","replacedBy":"111"},{"ruleId":"112","severity":1,"message":"113","line":13,"column":19,"nodeType":"114","messageId":"115","endLine":13,"endColumn":28},{"ruleId":"112","severity":1,"message":"116","line":14,"column":18,"nodeType":"114","messageId":"115","endLine":14,"endColumn":26},{"ruleId":"117","severity":1,"message":"118","line":25,"column":6,"nodeType":"119","endLine":25,"endColumn":8,"suggestions":"120"},{"ruleId":"112","severity":1,"message":"121","line":11,"column":9,"nodeType":"114","messageId":"115","endLine":11,"endColumn":16},{"ruleId":"117","severity":1,"message":"122","line":12,"column":6,"nodeType":"119","endLine":12,"endColumn":21,"suggestions":"123"},{"ruleId":"108","replacedBy":"124"},{"ruleId":"110","replacedBy":"125"},"no-native-reassign",["126"],"no-negated-in-lhs",["127"],"no-unused-vars","'setYourID' is assigned a value but never used.","Identifier","unusedVar","'setUsers' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'startVideo'. Either include it or remove the dependency array.","ArrayExpression",["128"],"'history' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'fetchUser'. Either include it or remove the dependency array.",["129"],["126"],["127"],"no-global-assign","no-unsafe-negation",{"desc":"130","fix":"131"},{"desc":"132","fix":"133"},"Update the dependencies array to be: [startVideo]",{"range":"134","text":"135"},"Update the dependencies array to be: [currentUser, fetchUser]",{"range":"136","text":"137"},[831,833],"[startVideo]",[313,328],"[currentUser, fetchUser]"]