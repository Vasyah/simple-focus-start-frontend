[{"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\index.js":"1","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\App.js":"2","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\contexts\\AuthContext.js":"3","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Header\\Header.js":"4","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\PrivateRoute\\PrivateRoute.js":"5","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\firebase.js":"6","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Alert\\Alert.js":"7","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useValidatePassword.js":"8","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useLogin.js":"9","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useValidateEmail.js":"10","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useSignup.js":"11","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useUpdateProfile.js":"12","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useForgotPassword.js":"13","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Users\\Users.js":"14","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Loading\\Loading.js":"15","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Delayed\\Delayed.js":"16","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useNoUser.js":"17","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\contexts\\VideoContext.js":"18","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\contexts\\MessagesContext.js":"19","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\contexts\\GlobalPopupContext.js":"20","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\GlobalPopup\\GlobalPopup.js":"21","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\StartListenServer\\StartListenServer.js":"22","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\UpdateProfilePage\\UpdateProfilePage.js":"23","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\ChatPage\\ChatPage.js":"24","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\VideoChatPage\\VideoChatPage.js":"25","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\ForgotPasswordPage\\ForgotPasswordPage.js":"26","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\NewsPage\\NewsPage.js":"27","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\LoginPage\\LoginPage.js":"28","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\SignupPage\\SignupPage.js":"29","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\AudioMessage\\AudioMessage.js":"30"},{"size":220,"mtime":1609759085619,"results":"31","hashOfConfig":"32"},{"size":2827,"mtime":1612025279901,"results":"33","hashOfConfig":"32"},{"size":7112,"mtime":1611920936945,"results":"34","hashOfConfig":"32"},{"size":2945,"mtime":1611924044008,"results":"35","hashOfConfig":"32"},{"size":969,"mtime":1611836140736,"results":"36","hashOfConfig":"32"},{"size":576,"mtime":1610813206689,"results":"37","hashOfConfig":"32"},{"size":388,"mtime":1609957114998,"results":"38","hashOfConfig":"32"},{"size":992,"mtime":1610045519359,"results":"39","hashOfConfig":"32"},{"size":902,"mtime":1611241623709,"results":"40","hashOfConfig":"32"},{"size":794,"mtime":1610045509732,"results":"41","hashOfConfig":"32"},{"size":930,"mtime":1611241540320,"results":"42","hashOfConfig":"32"},{"size":1255,"mtime":1610045493394,"results":"43","hashOfConfig":"32"},{"size":1134,"mtime":1610897175500,"results":"44","hashOfConfig":"32"},{"size":480,"mtime":1611920986343,"results":"45","hashOfConfig":"32"},{"size":403,"mtime":1611836307139,"results":"46","hashOfConfig":"32"},{"size":343,"mtime":1611135810167,"results":"47","hashOfConfig":"32"},{"size":550,"mtime":1611047095621,"results":"48","hashOfConfig":"32"},{"size":4131,"mtime":1612032300252,"results":"49","hashOfConfig":"32"},{"size":5978,"mtime":1612037155593,"results":"50","hashOfConfig":"32"},{"size":784,"mtime":1612019162620,"results":"51","hashOfConfig":"32"},{"size":2142,"mtime":1611924007808,"results":"52","hashOfConfig":"32"},{"size":625,"mtime":1611836380627,"results":"53","hashOfConfig":"32"},{"size":3915,"mtime":1612025384512,"results":"54","hashOfConfig":"32"},{"size":3430,"mtime":1612037021318,"results":"55","hashOfConfig":"32"},{"size":3324,"mtime":1611982095253,"results":"56","hashOfConfig":"32"},{"size":2733,"mtime":1612025343148,"results":"57","hashOfConfig":"32"},{"size":212,"mtime":1611925473448,"results":"58","hashOfConfig":"32"},{"size":3206,"mtime":1612025357649,"results":"59","hashOfConfig":"32"},{"size":4249,"mtime":1612025369378,"results":"60","hashOfConfig":"32"},{"size":1596,"mtime":1612032002329,"results":"61","hashOfConfig":"32"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},"146o5a3",{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"64"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"64"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"64"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"96","usedDeprecatedRules":"64"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101","usedDeprecatedRules":"102"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"105","messages":"106","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"111","usedDeprecatedRules":"64"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"114","usedDeprecatedRules":"64"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"117","messages":"118","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"119","messages":"120","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"129","messages":"130","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"131","usedDeprecatedRules":"64"},"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\index.js",[],["132","133"],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\App.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\contexts\\AuthContext.js",["134","135"],"import React, { useContext, useEffect, useState } from 'react';\r\nimport { auth } from \"../firebase\";\r\nimport firebase from 'firebase';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst AuthContext = React.createContext(undefined, undefined);\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport function AuthProvider({ children }) {\r\n  // state\r\n  const [ currentUserFull, setCurrentUserFull ] = useState();\r\n  const [ currentUser, setCurrentUser ] = useState();\r\n  \r\n  const [ allUsers, setAllUsers ] = useState([]);\r\n  const [ allUsersWithoutMe, setAllUsersWithoutMe ] = useState([]);\r\n  const [ allUsersOnline, setAllUsersOnline ] = useState([]);\r\n  // const [ loading, setLoading ] = useState(false); // мб потом использую\r\n  // const [ loginAction, setLoginAction ] = useState(false);\r\n  const [ logoutAction, setLogoutAction ] = useState(false);\r\n  // other\r\n  const history = useHistory();\r\n\r\n  // login actions\r\n\r\n  const signup = (email, password, name) => auth.createUserWithEmailAndPassword(email, password)\r\n    .then(() => {\r\n      let userId = auth.currentUser.uid\r\n      firebase.database().ref(`users/${userId}`).set({\r\n        name: name,\r\n        email: email,\r\n        online: true\r\n      })\r\n      history.push('/');\r\n    })\r\n\r\n  const login = (email, password) => auth.signInWithEmailAndPassword(email, password)\r\n    .then(() => {\r\n      console.log('action login');\r\n      history.push('/');\r\n    });\r\n\r\n  const loginHandler = (user) => {\r\n    updateUser({\r\n      id: user.uid,\r\n      updates: {\r\n        email: user.email,\r\n        online: true\r\n      }\r\n    })\r\n    getUser(user)\r\n      .then(data => {\r\n        setCurrentUser(data);\r\n      })\r\n      .finally(() => {});\r\n    // getUsers();\r\n    getUsers()\r\n      .then(data => {\r\n        setAllUsers(data);\r\n      })\r\n  }\r\n\r\n  // getting promises\r\n\r\n  const getUser = (user) => {\r\n    if (!user) user = auth.currentUser;\r\n    return firebase.database().ref(`users/${user.uid}`).once('value').then(snapshot => {\r\n      let userDetails = snapshot.val();\r\n      const updatedUser = {\r\n        name: userDetails.name,\r\n        email: userDetails.email,\r\n        id: auth.currentUser.uid,\r\n        online: userDetails.online\r\n      }\r\n      setCurrentUserFull(user);\r\n      return Promise.resolve(updatedUser);\r\n    });\r\n  }\r\n\r\n  const getUsers = () => {\r\n    return firebase.database().ref('users').once('value').then(snapshot => {\r\n      const userDetails = snapshot.val();\r\n      const users = Object.entries(userDetails).map(([ key, user ]) => {\r\n        return { ...user, id: key };\r\n      });\r\n      return Promise.all(users);\r\n    });\r\n  }\r\n\r\n  // logout actions\r\n\r\n  const logout = () => auth.signOut()\r\n    .finally(() => {\r\n      setLogoutAction(true)\r\n    });\r\n\r\n  const logoutHandler = () => {\r\n    updateUser({\r\n      id: currentUser.id,\r\n      updates: {\r\n        email: currentUser.email,\r\n        online: false\r\n      }\r\n    })\r\n    setCurrentUser();\r\n    setAllUsers([]);\r\n    setCurrentUserFull();\r\n    setLogoutAction(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!logoutAction) return;\r\n    console.log('user logout');\r\n    logoutHandler();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [ logoutAction ]);\r\n\r\n  // update actions\r\n\r\n  const updateUser = (payload) => {\r\n    if (payload.id) firebase.database().ref(`users/${payload.id}`)\r\n      .update(payload.updates)\r\n      .finally(() => {\r\n        console.log('user updated');\r\n      });\r\n  }\r\n\r\n  const updateEmail = (email) => currentUserFull\r\n    .updateEmail(email)\r\n    .finally(() => {\r\n      loginHandler(auth.currentUser);\r\n      console.log('email changed');\r\n    });\r\n\r\n  const updatePassword = (password) => currentUserFull\r\n    .updatePassword(password)\r\n    .finally(() => {\r\n      loginHandler(auth.currentUser);\r\n      console.log('password changed');\r\n    });\r\n\r\n  const resetPassword = (email) => auth.sendPasswordResetEmail(email);\r\n\r\n  // state change watcher\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged(user => {\r\n      if (user) {\r\n        console.log('auth state changed');\r\n        loginHandler(user);\r\n      }\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  \r\n  useEffect(() => {\r\n    if (currentUser && allUsers) {\r\n      const usersFiltered = allUsers.filter(user => user.id !== currentUser.id);\r\n      setAllUsersWithoutMe(usersFiltered);\r\n    }\r\n  }, [currentUser, allUsers]);\r\n\r\n  // useEffect(() => {\r\n  //   if (currentUser && allUsers) {\r\n  //     const usersFiltered = allUsers.filter(user => user.online);\r\n  //     setAllUsersOnline(usersFiltered);\r\n  //   }\r\n  // }, [allUsers, currentUser]);\r\n\r\n  // playground\r\n\r\n  useEffect(() => {\r\n    // console.log('currentUser', currentUser);\r\n  }, [ currentUser ]);\r\n\r\n  useEffect(() => {\r\n    // console.log('allUsers', allUsers);\r\n  }, [ allUsers ]);\r\n\r\n  // useEffect(() => {\r\n  //   if (!loginAction) return;\r\n  //   console.log('user login');\r\n  //   loginHandler(auth.currentUser);\r\n  // }, [loginAction]);\r\n\r\n  //\r\n  // useEffect(() => {\r\n  //   // console.log('loginAction', loginAction);\r\n  // }, [ loginAction ]);\r\n\r\n  // const getUsersAdd = () => {\r\n  //   let newAllUsers = allUsers;\r\n  //   firebase.database().ref('users').on('child_added', snapshot => {\r\n  //     const userDetails = snapshot.val();\r\n  //     let id = snapshot.key;\r\n  //     newAllUsers[id] = userDetails;\r\n  //     setAllUsers(newAllUsers);\r\n  //   });\r\n  // }\r\n\r\n  // const handleOnAuthStateChanged = () => {\r\n  //   firebase.auth().onAuthStateChanged(user => {\r\n  //     setLoading(true);\r\n  //     if (user) {\r\n  //       firebase.database().ref('users/' + user.uid).once('value', snapshot => {\r\n  //         let userDetails = snapshot.val();\r\n  //         setCurrentUser({\r\n  //           name: userDetails.name,\r\n  //           email: userDetails.email,\r\n  //           id: user.uid\r\n  //         })\r\n  //       })\r\n  //       updateUser({\r\n  //         id: user.uid,\r\n  //         updates: {\r\n  //           email: user.email,\r\n  //           online: true\r\n  //         }\r\n  //       })\r\n  //       getUsers();\r\n  //     } else {\r\n  //       console.log(currentUser);\r\n  //       updateUser({\r\n  //         id: currentUser.id,\r\n  //         updates: {\r\n  //           email: currentUser.email,\r\n  //           online: false\r\n  //         }\r\n  //       })\r\n  //       setAllUsers([]);\r\n  //       setCurrentUser();\r\n  //     }\r\n  //     setLoading(false);\r\n  //   });\r\n  // }\r\n  //\r\n\r\n  // const getUser = () => {\r\n  //   return new Promise((resolve) => {\r\n  //     if (currentUser) {\r\n  //       resolve(currentUser);\r\n  //       console.log(currentUser);\r\n  //     }\r\n  //   })\r\n  // }\r\n\r\n  const value = {\r\n    // state\r\n    currentUser,\r\n    allUsers,\r\n    allUsersWithoutMe,\r\n    // login actions\r\n    login,\r\n    signup,\r\n    // logout actions\r\n    logout,\r\n    // update actions\r\n    resetPassword,\r\n    updateEmail,\r\n    updatePassword,\r\n    // getting promises\r\n    getUser\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Header\\Header.js",["136"],"import React, { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport './header.scss';\r\nimport Alert from \"../Alert/Alert\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport logo from '../../assets/logo/logo-transparent-cut.png';\r\n\r\nconst Header = () => {\r\n  // ref\r\n  const dropdownRef = useRef();\r\n  // state\r\n  const [ errors, setErrors ] = useState([]);\r\n  const [ isProfileMenuOpened, setIsProfileMenuOpened ] = useState(false);\r\n  // other\r\n  const history = useHistory();\r\n  const { currentUser, allUsers, logout } = useAuth();\r\n\r\n  const handleUpdate = () => {\r\n    history.push('/update-profile');\r\n  }\r\n\r\n  const handleLogout = async () => {\r\n    setErrors([]);\r\n    try {\r\n      await logout();\r\n      history.push('/login');\r\n    } catch (error) {\r\n      console.error('logout error', error);\r\n      // setErrors([ 'Не удалось выйти из аккаунта!' ]);\r\n    }\r\n  }\r\n\r\n  const handleClickOutside = (event) => !event.composedPath().includes(dropdownRef.current) && setIsProfileMenuOpened(false);\r\n  const handleClickOutsideMemo = useMemo(() => handleClickOutside, []);\r\n\r\n  useEffect(() => {\r\n    isProfileMenuOpened\r\n      ? window.addEventListener('click', handleClickOutsideMemo, false)\r\n      : window.removeEventListener('click', handleClickOutsideMemo, false);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [ isProfileMenuOpened ]);\r\n\r\n  return (\r\n    <div className={'header-wrapper'}>\r\n      <div className={'header-content container'}>\r\n        <Link to={'/'} className=\"logo active\">\r\n          <img className={'logo-img'} src={logo} alt=\"logo\"/>\r\n        </Link>\r\n        <div className=\"navigation\">\r\n          <Link to={'/video'}>VIDEO</Link>\r\n        </div>\r\n        {\r\n          currentUser &&\r\n          <div className=\"profile-dropdown-menu-wrapper\" ref={dropdownRef}>\r\n            <div className=\"profile-dropdown-menu\" onClick={() => setIsProfileMenuOpened(!isProfileMenuOpened)}>\r\n              <h3 className=\"profile-name\">{currentUser.name}</h3>\r\n              <div className=\"profile-avatar\">{currentUser.name.substr(0, 1)}</div>\r\n              <div className=\"profile-arrow\"/>\r\n              {errors.length !== 0 && <Alert messages={errors} type={'error'}/>}\r\n              {isProfileMenuOpened &&\r\n              <div className=\"profile-dropdown-item\">\r\n                <div className={'update-profile-wrapper'}>\r\n                  <button className={'update-profile-button'} onClick={handleUpdate}>Изменить профиль</button>\r\n                </div>\r\n                <div className={'logout-button-wrapper'}>\r\n                  <button className={'logout-button'} onClick={handleLogout}>Выйти</button>\r\n                </div>\r\n              </div>\r\n              }\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header;\r\n","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\PrivateRoute\\PrivateRoute.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\firebase.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Alert\\Alert.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useValidatePassword.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useLogin.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useValidateEmail.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useSignup.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useUpdateProfile.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useForgotPassword.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Users\\Users.js",["137","138"],"import React from 'react';\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Users = () => {\r\n  const { allUsers, currentUser, allUsersWithoutMe } = useAuth();\r\n\r\n  return (\r\n    <>\r\n      {allUsersWithoutMe.map(user => {\r\n        return (\r\n          <div key={user.id}>\r\n            <Link to={`/chat/${user.id}`}>{user.name}</Link>\r\n          </div>\r\n        )\r\n      })\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Users;\r\n","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Loading\\Loading.js",["139","140","141"],"import React, { useEffect, useState } from \"react\";\r\nimport './loading.scss';\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <>\r\n      <div className=\"lds-roller\">\r\n        <div/>\r\n        <div/>\r\n        <div/>\r\n        <div/>\r\n        <div/>\r\n        <div/>\r\n        <div/>\r\n        <div/>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Loading;\r\n","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\Delayed\\Delayed.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\hooks\\useNoUser.js",["142"],"import { useState, useEffect } from 'react';\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\n\r\nconst useNoUser = () => {\r\n  const [ noUser, setNoUser ] = useState(true);\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    fetchUser().then(() => {\r\n      console.log(currentUser)\r\n    });\r\n  }, [ currentUser ]);\r\n\r\n  const fetchUser = async () => {\r\n    try {\r\n      !currentUser ? setNoUser(true) : setNoUser(false);\r\n    } catch {\r\n      console.log('error');\r\n    }\r\n  }\r\n\r\n  return { noUser };\r\n}\r\n\r\nexport default useNoUser;\r\n",["143","144"],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\contexts\\VideoContext.js",["145","146","147"],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\contexts\\MessagesContext.js",["148"],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\contexts\\GlobalPopupContext.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\GlobalPopup\\GlobalPopup.js",["149"],"import React, { useEffect } from 'react';\r\nimport { useGlobalPopup } from \"../../contexts/GlobalPopupContext\";\r\nimport { useVideo } from \"../../contexts/VideoContext\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst GlobalPopup = () => {\r\n  const { message, removeMessage, addMessage } = useGlobalPopup();\r\n  const { receivingCall, callAccepted, declineCall, caller } = useVideo();\r\n  const { allUsers } = useAuth();\r\n  const history = useHistory();\r\n\r\n  const handleDecline = () => {\r\n    declineCall();\r\n  };\r\n\r\n  const handleAccept = () => {\r\n    history.push('/video');\r\n  }\r\n\r\n  const handleClose = () => {\r\n    removeMessage();\r\n  }\r\n\r\n  useEffect(() => {\r\n    let user;\r\n    // выбираю чела который звонит\r\n    if (caller.data) user = allUsers.find(user => user.id === caller.data.userId);\r\n    // добавляю сообщение\r\n    if (receivingCall && !callAccepted && caller) addMessage(`вам звонит ${user.name}`, { type: 'call' });\r\n  }, [ receivingCall, callAccepted, caller ]);\r\n\r\n  const popupType = () => {\r\n    let popup;\r\n    // выбираю нужный тип попапа\r\n    switch (message.payload.type) {\r\n      case 'call':\r\n        popup =\r\n          <>\r\n            <div>\r\n              {message.message && <p>{message.message}</p>}\r\n              <button onClick={() => {\r\n                handleAccept();\r\n                handleClose();\r\n              }}>ответить</button>\r\n              <button onClick={() => {\r\n                handleDecline();\r\n                handleClose();\r\n              }}>отклонить</button>\r\n            </div>\r\n          </>\r\n        break;\r\n      case 'message':\r\n        popup =\r\n          <div>\r\n            {message.message && <p>{message.message}</p>}\r\n            <button onClick={handleClose}>\r\n              закрыть\r\n            </button>\r\n          </div>\r\n        break;\r\n      default:\r\n        popup = <></>;\r\n    }\r\n    return popup;\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      {!!message && popupType()}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default GlobalPopup;\r\n","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\StartListenServer\\StartListenServer.js",["150"],"import React, { useEffect, useState } from \"react\";\r\nimport { useVideo } from \"../../contexts/VideoContext\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nconst StartListenServer = () => {\r\n  const { startListen } = useVideo();\r\n  const [ loading, setLoading ] = useState(true);\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    currentUser ? setLoading(false) : setLoading(true);\r\n  }, [ currentUser ]);\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      startListen();\r\n      console.log('listen')\r\n    }\r\n  }, [loading]);\r\n\r\n  return (\r\n    <></>\r\n  );\r\n}\r\n\r\nexport default StartListenServer;\r\n","C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\UpdateProfilePage\\UpdateProfilePage.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\ChatPage\\ChatPage.js",["151","152","153","154"],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\VideoChatPage\\VideoChatPage.js",["155","156","157","158","159","160","161"],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\ForgotPasswordPage\\ForgotPasswordPage.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\NewsPage\\NewsPage.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\LoginPage\\LoginPage.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\pages\\SignupPage\\SignupPage.js",[],"C:\\Users\\Савва\\Desktop\\prog\\react\\simple\\simple-frontend\\src\\components\\AudioMessage\\AudioMessage.js",["162","163","164","165","166","167"],"import React, { useEffect, useState } from 'react';\r\nimport MicRecorder from 'mic-recorder-to-mp3';\r\n\r\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\r\n\r\nconst AudioMessage = () => {\r\n  // state\r\n  const [ isRecording, setIsRecording ] = useState(false);\r\n  const [ blobURL, setBlobURL ] = useState('');\r\n  const [ isBlocked, setIsBlocked ] = useState(false);\r\n  // other\r\n  // const start = () => {\r\n  //   if (isBlocked) {\r\n  //     console.log('Permission Denied');\r\n  //   } else {\r\n  //     Mp3Recorder\r\n  //       .start()\r\n  //       .then(() => {\r\n  //         setIsRecording(true)\r\n  //       }).catch((e) => console.error(e));\r\n  //   }\r\n  // };\r\n  //\r\n  // const stop = () => {\r\n  //   Mp3Recorder\r\n  //     .stop()\r\n  //     .getMp3()\r\n  //     .then(([ buffer, blob ]) => {\r\n  //       const blobURL = URL.createObjectURL(blob)\r\n  //       console.log(blobURL);\r\n  //       setBlobURL(blobURL);\r\n  //       setIsRecording(false);\r\n  //     }).catch((e) => console.log(e));\r\n  // };\r\n\r\n  // const handlePermissions = () => {\r\n  //   navigator.getUserMedia({ audio: true },\r\n  //     () => {\r\n  //       console.log('Permission Granted');\r\n  //       setIsBlocked(false);\r\n  //     },\r\n  //     () => {\r\n  //       console.log('Permission Denied');\r\n  //       setIsBlocked(true);\r\n  //     },\r\n  //   );\r\n  // }\r\n\r\n  useEffect(() => {\r\n    // handlePermissions();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <audio src={blobURL} controls=\"controls\"/>\r\n      </header>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AudioMessage;\r\n",{"ruleId":"168","replacedBy":"169"},{"ruleId":"170","replacedBy":"171"},{"ruleId":"172","severity":1,"message":"173","line":17,"column":11,"nodeType":"174","messageId":"175","endLine":17,"endColumn":25},{"ruleId":"172","severity":1,"message":"176","line":17,"column":27,"nodeType":"174","messageId":"175","endLine":17,"endColumn":44},{"ruleId":"172","severity":1,"message":"177","line":16,"column":24,"nodeType":"174","messageId":"175","endLine":16,"endColumn":32},{"ruleId":"172","severity":1,"message":"177","line":6,"column":11,"nodeType":"174","messageId":"175","endLine":6,"endColumn":19},{"ruleId":"172","severity":1,"message":"178","line":6,"column":21,"nodeType":"174","messageId":"175","endLine":6,"endColumn":32},{"ruleId":"172","severity":1,"message":"179","line":1,"column":17,"nodeType":"174","messageId":"175","endLine":1,"endColumn":26},{"ruleId":"172","severity":1,"message":"180","line":1,"column":28,"nodeType":"174","messageId":"175","endLine":1,"endColumn":36},{"ruleId":"172","severity":1,"message":"181","line":3,"column":10,"nodeType":"174","messageId":"175","endLine":3,"endColumn":17},{"ruleId":"182","severity":1,"message":"183","line":12,"column":6,"nodeType":"184","endLine":12,"endColumn":21,"suggestions":"185"},{"ruleId":"168","replacedBy":"186"},{"ruleId":"170","replacedBy":"187"},{"ruleId":"172","severity":1,"message":"179","line":1,"column":29,"nodeType":"174","messageId":"175","endLine":1,"endColumn":38},{"ruleId":"172","severity":1,"message":"188","line":2,"column":8,"nodeType":"174","messageId":"175","endLine":2,"endColumn":16},{"ruleId":"172","severity":1,"message":"189","line":18,"column":20,"nodeType":"174","messageId":"175","endLine":18,"endColumn":30},{"ruleId":"172","severity":1,"message":"179","line":1,"column":29,"nodeType":"174","messageId":"175","endLine":1,"endColumn":38},{"ruleId":"182","severity":1,"message":"190","line":31,"column":6,"nodeType":"184","endLine":31,"endColumn":45,"suggestions":"191"},{"ruleId":"182","severity":1,"message":"192","line":19,"column":6,"nodeType":"184","endLine":19,"endColumn":15,"suggestions":"193"},{"ruleId":"172","severity":1,"message":"194","line":4,"column":10,"nodeType":"174","messageId":"175","endLine":4,"endColumn":16},{"ruleId":"172","severity":1,"message":"195","line":6,"column":8,"nodeType":"174","messageId":"175","endLine":6,"endColumn":20},{"ruleId":"182","severity":1,"message":"196","line":36,"column":6,"nodeType":"184","endLine":36,"endColumn":21,"suggestions":"197"},{"ruleId":"182","severity":1,"message":"198","line":45,"column":6,"nodeType":"184","endLine":45,"endColumn":8,"suggestions":"199"},{"ruleId":"172","severity":1,"message":"180","line":1,"column":28,"nodeType":"174","messageId":"175","endLine":1,"endColumn":36},{"ruleId":"172","severity":1,"message":"200","line":2,"column":8,"nodeType":"174","messageId":"175","endLine":2,"endColumn":10},{"ruleId":"172","severity":1,"message":"201","line":3,"column":8,"nodeType":"174","messageId":"175","endLine":3,"endColumn":12},{"ruleId":"172","severity":1,"message":"202","line":6,"column":22,"nodeType":"174","messageId":"175","endLine":6,"endColumn":33},{"ruleId":"172","severity":1,"message":"203","line":16,"column":9,"nodeType":"174","messageId":"175","endLine":16,"endColumn":16},{"ruleId":"172","severity":1,"message":"204","line":17,"column":11,"nodeType":"174","messageId":"175","endLine":17,"endColumn":21},{"ruleId":"182","severity":1,"message":"205","line":75,"column":6,"nodeType":"184","endLine":75,"endColumn":21,"suggestions":"206"},{"ruleId":"172","severity":1,"message":"207","line":4,"column":7,"nodeType":"174","messageId":"175","endLine":4,"endColumn":18},{"ruleId":"172","severity":1,"message":"208","line":8,"column":11,"nodeType":"174","messageId":"175","endLine":8,"endColumn":22},{"ruleId":"172","severity":1,"message":"209","line":8,"column":24,"nodeType":"174","messageId":"175","endLine":8,"endColumn":38},{"ruleId":"172","severity":1,"message":"210","line":9,"column":20,"nodeType":"174","messageId":"175","endLine":9,"endColumn":30},{"ruleId":"172","severity":1,"message":"211","line":10,"column":11,"nodeType":"174","messageId":"175","endLine":10,"endColumn":20},{"ruleId":"172","severity":1,"message":"212","line":10,"column":22,"nodeType":"174","messageId":"175","endLine":10,"endColumn":34},"no-native-reassign",["213"],"no-negated-in-lhs",["214"],"no-unused-vars","'allUsersOnline' is assigned a value but never used.","Identifier","unusedVar","'setAllUsersOnline' is assigned a value but never used.","'allUsers' is assigned a value but never used.","'currentUser' is assigned a value but never used.","'useEffect' is defined but never used.","'useState' is defined but never used.","'useAuth' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchUser'. Either include it or remove the dependency array.","ArrayExpression",["215"],["213"],["214"],"'firebase' is defined but never used.","'setLoading' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'addMessage' and 'allUsers'. Either include them or remove the dependency array.",["216"],"React Hook useEffect has a missing dependency: 'startListen'. Either include it or remove the dependency array.",["217"],"'Prompt' is defined but never used.","'AudioMessage' is defined but never used.","React Hook useEffect has a missing dependency: 'getMessages'. Either include it or remove the dependency array.",["218"],"React Hook useEffect has missing dependencies: 'history' and 'stopGettingMessages'. Either include them or remove the dependency array.",["219"],"'io' is defined but never used.","'Peer' is defined but never used.","'useLocation' is defined but never used.","'history' is assigned a value but never used.","'addMessage' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'startVideo'. Either include it or remove the dependency array.",["220"],"'Mp3Recorder' is assigned a value but never used.","'isRecording' is assigned a value but never used.","'setIsRecording' is assigned a value but never used.","'setBlobURL' is assigned a value but never used.","'isBlocked' is assigned a value but never used.","'setIsBlocked' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"221","fix":"222"},{"desc":"223","fix":"224"},{"desc":"225","fix":"226"},{"desc":"227","fix":"228"},{"desc":"229","fix":"230"},{"desc":"231","fix":"232"},"Update the dependencies array to be: [currentUser, fetchUser]",{"range":"233","text":"234"},"Update the dependencies array to be: [receivingCall, callAccepted, caller, allUsers, addMessage]",{"range":"235","text":"236"},"Update the dependencies array to be: [loading, startListen]",{"range":"237","text":"238"},"Update the dependencies array to be: [getMessages, otherUserId]",{"range":"239","text":"240"},"Update the dependencies array to be: [history, stopGettingMessages]",{"range":"241","text":"242"},"Update the dependencies array to be: [currentUser, startVideo]",{"range":"243","text":"244"},[313,328],"[currentUser, fetchUser]",[1002,1041],"[receivingCall, callAccepted, caller, allUsers, addMessage]",[541,550],"[loading, startListen]",[1061,1076],"[getMessages, otherUserId]",[1238,1240],"[history, stopGettingMessages]",[1795,1810],"[currentUser, startVideo]"]